require "./simulation_runner.rb"
require "./linear_state_space_model.rb"

task default: %w[test]

task :compile do
  sim = SimulationRunner.new_from_json_export()
end

task :test_seesaw_simulation do
  file = File.read("./test_models/sketchup_tetrahedron.json")
  sim = SimulationRunner.new_from_json_export(file)
  p sim.run_simulation
end

task :test_spring_length_initilization do
  file = File.read("./test_models/sketchup_tetrahedron.json")
  sim = SimulationRunner.new_from_json_export(file)
  p sim.get_spring_extensions
end

task :test_seesaw_linearization do
  file = File.read("./test_models/sketchup_tetrahedron.json")
  sim = SimulationRunner.new_from_json_export(file)
  # run_simulation
  # p sim.get_system_matrix
end

task :test_get_period do
  sim = SimulationRunner.new()
end

task :parse_linear_state_space_model do
  model = LinearStateSpaceModel.new("./test_models/linear_tetra.mo")
  # puts model.inspect
  puts model.eigenfreq
  # model.resolve_inputs
  # model.cp_to_jupyter
end

task default: %w[test]
